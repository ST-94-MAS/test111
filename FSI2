# 使用するメモリのサイズ（GB単位で指定）
$memorySize = 80 # 必要なサイズに応じて変更します

# メモリ確保開始メッセージ
Write-Output "Memory allocation started..."

# 大量の整数を格納する配列を作成してメモリを消費します
$integersArray = @()

for ($i = 0; $i -lt ($memorySize * 256 * 1024); $i++) {
    $integersArray += (Get-Random -Maximum [int]::MaxValue)
    if ($i % 1000 -eq 0) {
        Write-Output "Allocated approximately $([math]::Round($i / 256)) MB of memory"
    }
}

# メモリ確保後のメッセージ
Write-Output "Memory allocated successfully. Holding memory..."

# メモリを保持するために停止せずに保持する
Start-Sleep -Seconds 3600

# スクリプト終了メッセージ
Write-Output "Memory allocation test completed."
